!function(e){e.Rosefire={},e.Rosefire.signIn=function(e,n){var r=encodeURIComponent(e),o=encodeURIComponent(location.origin),i=window.open("https://rosefire.csse.rose-hulman.edu/webview/login?platform=web&registryToken="+r+"&referrer="+o,"_blank"),a=setInterval((function(){i.closed&&(clearInterval(a),n&&(n(new Error("Login cancelled")),n=null))}),500);window.addEventListener("message",(function(e){var r=e.origin||e.originalEvent.origin;if("https://rosefire.csse.rose-hulman.edu"===r){var o=n;n=null,clearInterval(a),e.source.close(),o&&o(null,function(e){var n=e.split(".")[1];if((n=JSON.parse(atob(n))).d)n=n.d;else{var r=n.uid;(n=n.claims).uid=r}return{token:e,name:n.name,group:n.group,email:n.email,username:n.uid}}(e.data))}else console.error("Invalid origin:"+r)}))}}(this);