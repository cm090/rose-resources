!function(e){e.Rosefire={},e.Rosefire.signIn=function(e,n){var o=encodeURIComponent(e),t=encodeURIComponent(location.origin),i=window.open("https://rosefire.csse.rose-hulman.edu/webview/login?platform=web&registryToken="+o+"&referrer="+t),a=setInterval((function(){i.closed&&(clearInterval(a),n&&(n(new Error("Login cancelled")),n=null))}),500);window.addEventListener("message",(function(e){e.origin||e.originalEvent.origin;var o=n;n=null,clearInterval(a),e.source.close(),o&&o(null,function(e){var n=e.split(".")[1];if((n=JSON.parse(atob(n))).d)n=n.d;else{var o=n.uid;(n=n.claims).uid=o}return{token:e,name:n.name,group:n.group,email:n.email,username:n.uid}}(e.data))}))}}(this);var dropdownClicked=!1;function authSignOut(){firebase.auth().signOut()}function userCheck(e){null==e?($(".showOnAuth")[0].classList.add("hidden"),$(".showOnAuth")[1].classList.add("hidden"),$(".showOnAuth")[2].classList.add("hidden"),$(".noAccount")[0].classList.remove("hidden"),document.getElementById("navUserName").innerText="Not authenticated"):($(".showOnAuth")[0].classList.remove("hidden"),$(".showOnAuth")[1].classList.remove("hidden"),$(".showOnAuth")[2].classList.remove("hidden"),$(".noAccount")[0].classList.add("hidden"),document.getElementById("navUserName").innerText=e.displayName)}$("#accountDrop").mouseenter((function(){$("#accountMenu").slideDown(100)})).mouseleave((function(){dropdownClicked||0==$("#accountMenu:hover").length&&$("#accountMenu").slideUp(100)})),$("#accountMenu").mouseleave((function(){dropdownClicked||0==$("#accountDrop:hover").length&&$("#accountMenu").slideUp(100)})),$("#accountDrop").on("click",(function(){dropdownClicked?$("#accountMenu").slideUp(100):$("#accountMenu").slideDown(100),dropdownClicked=!dropdownClicked})),window.onload=e=>{userCheck(firebase.auth().currentUser),firebase.auth().onAuthStateChanged((e=>{userCheck(e)}))},firebase.auth().onAuthStateChanged((e=>{if(null!=e||window.location.pathname.includes("auth")||"/"===window.location.pathname){$(".showOnAuth")[0].classList.remove("hidden"),$(".showOnAuth")[1].classList.remove("hidden"),$(".showOnAuth")[2].classList.remove("hidden"),$(".noAccount")[0].classList.add("hidden");try{document.getElementById("headNameBox").innerText+=", "+e.displayName+"!"}catch(e){}}else window.location="/auth.html"}));